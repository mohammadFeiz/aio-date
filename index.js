"use strict";function _defineProperty(e,t,i){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AIODate=void 0;class AIODate{constructor(){_defineProperty(this,"isMatch",void 0),_defineProperty(this,"convertToArray",void 0),_defineProperty(this,"isLess",void 0),_defineProperty(this,"isGreater",void 0),_defineProperty(this,"isEqual",void 0),_defineProperty(this,"isBetween",void 0),_defineProperty(this,"compaire",void 0),_defineProperty(this,"getWeekDay",void 0),_defineProperty(this,"isToday",void 0),_defineProperty(this,"isJalali",void 0),_defineProperty(this,"getWeekDays",void 0),_defineProperty(this,"toGregorian",void 0),_defineProperty(this,"toJalali",void 0),_defineProperty(this,"pattern",void 0),_defineProperty(this,"get2Digit",void 0),_defineProperty(this,"getMonths",void 0),_defineProperty(this,"getSplitter",void 0),_defineProperty(this,"getTime",void 0),_defineProperty(this,"getNextTime",void 0),_defineProperty(this,"getMonthDaysLength",void 0),_defineProperty(this,"getYearDaysLength",void 0),_defineProperty(this,"getDaysOfWeek",void 0),_defineProperty(this,"getDatesBetween",void 0),_defineProperty(this,"getDelta",void 0),_defineProperty(this,"convertMiliseconds",void 0),_defineProperty(this,"getDaysOfMonth",void 0),_defineProperty(this,"getLastDayOfMonth",void 0),_defineProperty(this,"getDateByPattern",void 0),_defineProperty(this,"getToday",void 0),_defineProperty(this,"getDayIndex",void 0),_defineProperty(this,"getYesterday",void 0),_defineProperty(this,"getTomarrow",void 0),_defineProperty(this,"toMiliseconds",void 0),_defineProperty(this,"getDateByDeltaMiliseconds",void 0),this.toMiliseconds=e=>{let{day:t=0,hour:i=0,minute:r=0,second:s=0}=e,o=0;return o+=864e5*t,o+=36e5*i,o+=6e4*r,o+=1e3*s},this.isMatch=(e,t)=>{e=this.convertToArray(e);for(let i=0;i<t.length;i++){let r=t[i],s,o;try{let n=r.split(",");s=n[0],o=n.slice(1,n.length)}catch{break}if("<"===s){for(let $=0;$<o.length;$++)if(this.isLess(e,o[$]))return!0}else if(">"===s){for(let h=0;h<o.length;h++)if(this.isGreater(e,o[h]))return!0}else if("<="===s){for(let a=0;a<o.length;a++)if(this.isEqual(e,o[a])||this.isLess(e,o[a]))return!0}else if(">="===s){for(let l=0;l<o.length;l++)if(this.isEqual(e,o[l])||this.isGreater(e,o[l]))return!0}else if("="===s){for(let f=0;f<o.length;f++)if(this.isEqual(e,o[f]))return!0}else if("!="===s){for(let g=0;g<o.length;g++)if(!this.isEqual(e,o[g]))return!0}else if("<>"===s){if(o[0]&&o[1]){let y,_;if(this.isLess(o[0],o[1])?(y=o[0],_=o[1]):(y=o[1],_=o[0]),this.isGreater(e,y)&&this.isLess(e,_))return!0}}else if("<=>"===s){if(o[0]&&o[1]){let d,u;if(this.isLess(o[0],o[1])?(d=o[0],u=o[1]):(d=o[1],u=o[0]),this.isGreater(e,d)&&this.isLess(e,u)||this.isEqual(e,d)||this.isEqual(e,u))return!0}}else if("!<>"===s){if(o[0]&&o[1]){let p,c;if(this.isLess(o[0],o[1])?(p=o[0],c=o[1]):(p=o[1],c=o[0]),!this.isGreater(e,p)||!this.isLess(e,c))return!0}}else if("!<=>"===s){if(o[0]&&o[1]){let v,D;if(this.isLess(o[0],o[1])?(v=o[0],D=o[1]):(v=o[1],D=o[0]),!this.isEqual(e,v)&&!this.isEqual(e,D)&&(this.isLess(e,v)||this.isGreater(e,D)))return!0}}else if("w"===s){let m=this.getWeekDay(e).index;for(let T=0;T<o.length;T++)if(m===+o[T])return!0}else if("!w"===s){let P=this.getWeekDay(e).index;for(let A=0;A<o.length;A++)if(P!==+o[A])return!0}}return!1},this.convertToArray=(e,t)=>{if(!e)return[];let i;if(Array.isArray(e))i=[...e];else if("string"==typeof e){if(-1!==e.indexOf("T")){let[r,s]=e.split("T"),o=s.split(".")[0].split(":");i=[...r.split("-").map(e=>+e),...o.map(e=>+e),0]}else i=e.split(this.getSplitter(e)).map(e=>+e)}else if("number"==typeof e){let n=new Date(e),$=n.getFullYear(),h=n.getMonth()+1,a=n.getDate(),l=n.getHours(),f=n.getMinutes(),g;i=[$,h,a,l,f,n.getSeconds(),Math.round(n.getMilliseconds()/100)]}else if("object"!=typeof e)return[];else if("function"==typeof e.getMonth){let y=e,_=y.getFullYear(),d=y.getMonth()+1,u=y.getDate(),p=y.getHours(),c=y.getMinutes(),v;i=[_,d,u,p,c,y.getSeconds(),Math.round(y.getMilliseconds()/100)]}else{let D=this.getToday(t),m=e;return[void 0===m.year?D[0]:m.year,void 0===m.month?D[1]:m.month,void 0===m.day?D[2]:m.day,void 0===m.hour?D[3]:m.hour,void 0===m.minute?D[4]:m.minute,void 0===m.second?D[5]:m.second]}if(t){let[T,P,A]=this.toJalali([i[0],i[1],i[2]]);i[0]=T,i[1]=P,i[2]=A}return i},this.compaire=(e,t)=>{e=this.convertToArray(e),t=this.convertToArray(t);let i="equal";for(let r=0;r<e.length;r++){isNaN(t[r])&&(t[r]=e[r]);let s=e[r],o=t[r]||0;if(s<o){i="less";break}if(s>o){i="greater";break}}return i},this.isLess=(e,t)=>"less"===this.compaire(e,t),this.isEqual=(e,t)=>"equal"===this.compaire(e,t),this.isGreater=(e,t)=>"greater"===this.compaire(e,t),this.isBetween=(e,[t,i])=>"greater"===this.compaire(e,t)&&"less"===this.compaire(e,t),this.isToday=e=>this.isEqual(e,this.getToday(this.isJalali(e))),this.getDateByDeltaMiliseconds=(e,t)=>this.convertToArray(this.getTime(e)+t),this.getWeekDay=e=>{let t=this.convertToArray(e),i=this.isJalali(t);t=this.toGregorian(e);let r=new Date(t[0],t[1]-1,t[2]).getDay();return i&&(r+=1,r%=7),{weekDay:this.getWeekDays(i)[r],index:r}},this.isJalali=e=>this.convertToArray(e)[0]<1700,this.getWeekDays=e=>[["شنبه","یکشنبه","دوشنبه","سه شنبه","چهارشنبه","پنجشنبه","جمعه"],["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"]][e?0:1],this.toGregorian=e=>{var t,i,r,s,o;if(!e)return[];let n=this.convertToArray(e);if(!this.isJalali(n))return n;let[$,h,a]=n;for($+=1595,i=400*~~((o=-355668+365*$+8*~~($/33)+~~(($%33+3)/4)+a+(h<7?(h-1)*31:(h-7)*30+186))/146097),(o%=146097)>36524&&(i+=100*~~(--o/36524),(o%=36524)>=365&&o++),i+=4*~~(o/1461),(o%=1461)>365&&(i+=~~((o-1)/365),o=(o-1)%365),s=o+1,t=[0,31,i%4==0&&i%100!=0||i%400==0?29:28,31,30,31,30,31,31,30,31,30,31],r=0;r<13&&s>t[r];r++)s-=t[r];return n[0]=i,n[1]=r,n[2]=s,n},this.pattern=(e,t,i=this.isJalali(e))=>{let[r,s,o,n,$,h,a]=e=this.convertToArray(e,i);if(t=t.replace("{year}",r.toString()),"number"==typeof s&&(t=t.replace("{month}",this.get2Digit(s))),"number"==typeof o&&(t=t.replace("{day}",this.get2Digit(o))),"number"==typeof n&&(t=t.replace("{hour}",this.get2Digit(n))),"number"==typeof $&&(t=t.replace("{minute}",this.get2Digit($))),"number"==typeof h&&(t=t.replace("{second}",this.get2Digit(h))),"number"==typeof a&&(t=t.replace("{tenthsecond}",this.get2Digit(a))),-1!==t.indexOf("{monthString}")&&(t=t.replace("{monthString}",this.getMonths(i)[s-1])),-1!==t.indexOf("{weekDay}")){let l=this.getWeekDays(i),{index:f}=this.getWeekDay(e);t=t.replace("{weekDay}",l[f])}return t},this.get2Digit=e=>{let t;try{t=e.toString()}catch{return e.toString()}return 1===t.length&&(t="0"+e),t},this.getMonths=e=>[["فروردین","اردیبهشت","خرداد","تیر","مرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"],["JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"]][e?0:1],this.toJalali=e=>{var t,i,r,s,o,n;let $=this.convertToArray(e);if(this.isJalali($))return $;let[h,a,l]=$;return t=[0,31,59,90,120,151,181,212,243,273,304,334],o=a>2?h+1:h,i=-1595+33*~~((n=355666+365*h+~~((o+3)/4)-~~((o+99)/100)+~~((o+399)/400)+l+t[a-1])/12053),n%=12053,i+=4*~~(n/1461),(n%=1461)>365&&(i+=~~((n-1)/365),n=(n-1)%365),n<186?(r=1+~~(n/31),s=1+n%31):(r=7+~~((n-186)/30),s=1+(n-186)%30),$[0]=i,$[1]=r,$[2]=s,$},this.getSplitter=e=>{let t="/";for(let i=0;i<e.length;i++)if(isNaN(parseInt(e[i])))return e[i];return t},this.getTime=(e,t=this.isJalali(e))=>{if(!e)return 0;if("number"==typeof e)return e;let[i,r=1,s=1,o=0,n=0,$=0,h=0]=e=this.convertToArray(e);t&&(e=this.toGregorian([i,r,s,o,n,$,h]));let a=new Date(e[0],e[1]-1,e[2]).getTime();return a+=36e5*o,a+=6e4*n,a+=1e3*$,a+=100*h},this.getNextTime=(e,t,i=this.isJalali(e))=>{if(!t)return this.convertToArray(e);let r=this.getTime(e,i);r+=t;let s=this.convertToArray(r);if(i){let[o,n,$]=this.toJalali(s);s[0]=o,s[1]=n,s[2]=$}return s},this.getMonthDaysLength=e=>{if(!e)return 0;let[t,i]=this.convertToArray(e);return this.isJalali([t,i])?[31,31,31,31,31,31,30,30,30,30,30,-1===[1,5,9,13,17,22,26,30].indexOf(t%33)?29:30][i-1]:new Date(t,i-1,0).getDate()},this.getYearDaysLength=e=>{if(!e)return 0;let[t]=this.convertToArray(e),i=0;for(let r=1;r<=12;r++)i+=this.getMonthDaysLength([t,r]);return i},this.getYesterday=e=>{let[t,i,r]=this.convertToArray(e),s=t,o=i,n=r;return 1===r?1===i?(s-=1,o=12,n=this.getMonthDaysLength([s,o])):(o-=1,n=this.getMonthDaysLength([s,o])):n-=1,[s,o,n]},this.getTomarrow=e=>{let[t,i,r]=this.convertToArray(e),s=t,o=i,n=r,$=this.getMonthDaysLength(e);return r===$?12===i?(s+=1,o=1,n=1):(o+=1,n=1):n+=1,[s,o,n]},this.getDaysOfWeek=(e,t)=>{if(!e)return[];let i=this.convertToArray(e),{index:r}=this.getWeekDay(i),s=[...i];for(let o=0;o<r;o++)s=this.getYesterday(s);let n=[];for(let $=0;$<7;$++)n.push(s),s=this.getTomarrow(s);return t?n.map(e=>this.getDateByPattern(e,t)):n},this.getDatesBetween=(e,t,i=864e5)=>{if(!e||!t||(e=this.convertToArray(e),t=this.convertToArray(t),!this.isGreater(t,e)))return[];let r=this.getDelta(e,t).miliseconds/i;if(isNaN(r)||r>1e3)return console.error("AIODate().getDatesBetween() => too many dates"),[];let s=this.getNextTime(e,i),o=[];for(;this.isLess(s,t);)o.push(s),s=this.getNextTime(s,i);return o},this.getDelta=(e,t,i)=>{let r=this.getTime(e)-this.getTime(t||this.getToday());return this.convertMiliseconds(-r,i)},this.convertMiliseconds=(e=0,t="day")=>{let i;e<0?(i="passed",e=-e):i=e>0?"remaining":"now";let r=["day","hour","minute","second","tenthsecond","milisecond"].indexOf(t),s=0,o=0,n=0,$=0,h=0,a=e;return r<=0&&(s=Math.floor(a/864e5),a-=864e5*s),r<=1&&(o=Math.floor(a/36e5),a-=36e5*o),r<=2&&(n=Math.floor(a/6e4),a-=6e4*n),r<=3&&($=Math.floor(a/1e3),a-=1e3*$),r<=4&&(h=Math.floor(a/100)),{day:s,hour:o,minute:n,second:$,tenthsecond:h,miliseconds:e,type:i}},this.getDaysOfMonth=(e,t)=>{if(!e)return[];let i=this.convertToArray(e),r=this.getMonthDaysLength(e),s=[i[0],i[1],1],o=[];for(let n=0;n<r;n++)o.push(s),s=this.getTomarrow(s);return t?o.map(e=>this.getDateByPattern(e,t)):o},this.getLastDayOfMonth=e=>{let t=this.convertToArray(e),i=this.getMonthDaysLength(t);return[t[0],t[1],i]},this.getDateByPattern=(e,t)=>this.pattern(e,t),this.getToday=e=>{let t=new Date,i=[t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),Math.round(t.getMilliseconds()/100)];return e&&(i=this.toJalali(i)),i},this.getDayIndex=(e,t)=>{if(e=this.convertToArray(e),"week"===t){let i=this.getDaysOfWeek(e);for(let r=0;r<i.length;r++){let[s,o,n]=i[r];if(s===e[0]&&o===e[1]&&n===e[2])return r}}if("month"===t)return e[2]-1;if("year"===t){let $=0;for(let h=0;h<e[1]-1;h++)$+=this.getMonthDaysLength(e);return($+=e[1])-1}return 0}}}exports.AIODate=AIODate;